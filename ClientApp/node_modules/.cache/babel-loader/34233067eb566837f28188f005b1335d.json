{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drack90\\\\source\\\\repos\\\\appTestRosneft\\\\ClientApp\\\\src\\\\components\\\\Pipline.js\";\nimport React, { Component } from 'react';\nimport { render } from 'react-dom'; //import { CanvasBoard } from './CanvasBoard'\n//mport { PiplineSegment } from './PiplineSegment'\n\nimport './css/Pipline.css';\nimport { PiplineSegment } from './PiplineSegment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Pipline extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      piplinesSegmentCount: 0\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"piplineSections\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xxl-8 col-xl-8 col-lg-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"canvasContainer\",\n              children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n                id: \"piplineCanvas\",\n                width: \"740\",\n                height: \"425\",\n                onMouseDown: e => {\n                  let newEvent = e.nativeEvent;\n                  HandleMouseDown(newEvent);\n                },\n                onMouseUp: e => {\n                  let nativeEvent = e.nativeEvent;\n                  HandleMouseUp(nativeEvent);\n                },\n                onMouseMove: e => {\n                  let nativeEvent = e.nativeEvent;\n                  HandleMouseMove(nativeEvent);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 22,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 21,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 20,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xxl-4 col-xl-4 col-lg-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"boardContainer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"canvasBoard_componen\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: (activeCanvas, AddPipline),\n                  children: \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0442\\u0440\\u0443\\u0431\\u043E\\u043F\\u0440\\u043E\\u0432\\u043E\\u0434 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 41,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success\",\n                  onClick: SetAddPointActive,\n                  children: \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0443\\u0437\\u0435\\u043B \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 42,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  children: \" \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0443\\u0437\\u0435\\u043B \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 43,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning\",\n                  children: \" \\u0420\\u0430\\u0441\\u0441\\u0447\\u0438\\u0442\\u0430\\u0442\\u044C \\u043F\\u0435\\u0440\\u0435\\u0441\\u0435\\u0447\\u0435\\u043D\\u0438\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 44,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"piplineElements\",\n              id: \"piplineItems\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                id: \"piplineList\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nPipline.dislpayName = Pipline.name;\nlet piplines = [];\nlet mouseDown = false;\nlet piplinesCount = 0;\nlet defaultId = 0;\nlet defaultPoint = [0, 0];\nlet AddPointActive = false;\nlet downOnSelected = false;\nlet points = [];\nlet selectedNumber = -1;\nlet activePipline = new Number();\n\nfunction addPiplines() {\n  let pipline = {\n    id: piplinesCount,\n    name: 'Трубопровод ' + piplinesCount,\n    points: [],\n    color: ''\n  };\n  this.piplines.push(pipline);\n}\n\nfunction SetAddPointActive() {\n  AddPointActive = true;\n  console.log(\"Add active\");\n}\n\n_c = SetAddPointActive;\n\nlet log = () => {\n  console.log('kek');\n};\n\nfunction renderPiplineItems() {\n  return render(piplines.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n    id: item.id + \"pipline\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: setPipline(item.id),\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this)\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 13\n  }, this)), document.getElementById('piplineList'));\n}\n\nfunction setPipline(id) {\n  console.log(\"Выранный ID \" + id);\n}\n\nfunction getRandomColor() {\n  var letters = '0123456789ABCDEF';\n  var color = '#';\n\n  for (var i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n\n  return color;\n}\n\nfunction AddPipline() {\n  let color = getRandomColor();\n  let pipline = {\n    id: piplinesCount + 1,\n    name: \"Трубопровод \" + piplinesCount,\n    color: color,\n    points: []\n  };\n  piplines.push(pipline);\n  piplinesCount += 1;\n  renderPiplineItems();\n  console.log(piplines);\n  console.log(piplinesCount);\n} //Проверить перед деплоем\n\n\n_c2 = AddPipline;\n\nfunction DeletePipline(id) {\n  piplines.every((item, i) => {\n    if (item.i === id) {\n      delete piplines[i];\n    }\n  });\n}\n\n_c3 = DeletePipline;\n\nlet activeCanvas = () => {\n  let canvas = document.getElementById('piplineCanvas').classList.toggle('canvas_active');\n};\n\nfunction AddPoint(x, y) {\n  var point = {\n    x,\n    y\n  };\n  points.push(point);\n}\n\n_c4 = AddPoint;\n\nfunction TrySelectPoint(x, y) {\n  for (var i = 0; i < points.length; i++) {\n    var point = points[i];\n\n    if (x >= point.x - 5 && x <= point.x + 5 && y >= point.y - 5 && y <= point.y + 5) {\n      selectedNumber = i;\n      DrawPipeline();\n      return true;\n    }\n  }\n\n  console.log(points);\n  return false;\n}\n\n_c5 = TrySelectPoint;\n\nfunction HandleMouseDown(event) {\n  mouseDown = true;\n\n  if (AddPointActive) {\n    var x = event.offsetX;\n    var y = event.offsetY;\n    AddPoint(x, y);\n    DrawPipeline();\n    AddPointActive = false;\n  } else {\n    x = event.offsetX;\n    y = event.offsetY;\n    downOnSelected = TrySelectPoint(x, y);\n  }\n}\n\n_c6 = HandleMouseDown;\n\nfunction HandleMouseMove(event) {\n  if (mouseDown) {\n    if (downOnSelected) {\n      var x = event.offsetX;\n      var y = event.offsetY;\n      var point = points[selectedNumber];\n      point.x = x;\n      point.y = y;\n      DrawPipeline();\n    }\n  }\n}\n\n_c7 = HandleMouseMove;\n\nfunction HandleMouseUp() {\n  mouseDown = false;\n  downOnSelected = false;\n}\n\n_c8 = HandleMouseUp;\n\nfunction DrawPipeline() {\n  var canvas = document.getElementById('piplineCanvas');\n  var ctx = canvas.getContext('2d');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  if (points.length > 0) {\n    DrawLines();\n  }\n\n  for (var i = 0; i < points.length; i++) {\n    if (i === selectedNumber) DrawPoint(points[i].x, points[i].y, \"red\");else DrawPoint(points[i].x, points[i].y, \"black\");\n  }\n}\n\n_c9 = DrawPipeline;\n\nfunction DrawPoint(x, y, color) {\n  var canvas = document.getElementById('piplineCanvas');\n  var ctx = canvas.getContext('2d');\n  ctx.beginPath();\n  ctx.arc(x, y, 5, 0, getRadians(360));\n  ctx.fillStyle = color;\n  ctx.moveTo(x, y);\n  ctx.fill();\n}\n\n_c10 = DrawPoint;\n\nfunction DrawLines() {\n  var canvas = document.getElementById('piplineCanvas');\n  var ctx = canvas.getContext('2d');\n  ctx.beginPath();\n  ctx.moveTo(points[0].x, points[0].y);\n\n  for (var i = 1; i < points.length; i++) {\n    ctx.lineTo(points[i].x, points[i].y);\n  }\n\n  ctx.stroke();\n}\n\n_c11 = DrawLines;\n\nfunction getRadians(degrees) {\n  return Math.PI / 180 * degrees;\n}\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n\n$RefreshReg$(_c, \"SetAddPointActive\");\n$RefreshReg$(_c2, \"AddPipline\");\n$RefreshReg$(_c3, \"DeletePipline\");\n$RefreshReg$(_c4, \"AddPoint\");\n$RefreshReg$(_c5, \"TrySelectPoint\");\n$RefreshReg$(_c6, \"HandleMouseDown\");\n$RefreshReg$(_c7, \"HandleMouseMove\");\n$RefreshReg$(_c8, \"HandleMouseUp\");\n$RefreshReg$(_c9, \"DrawPipeline\");\n$RefreshReg$(_c10, \"DrawPoint\");\n$RefreshReg$(_c11, \"DrawLines\");","map":{"version":3,"sources":["C:/Users/drack90/source/repos/appTestRosneft/ClientApp/src/components/Pipline.js"],"names":["React","Component","render","PiplineSegment","Pipline","state","piplinesSegmentCount","e","newEvent","nativeEvent","HandleMouseDown","HandleMouseUp","HandleMouseMove","activeCanvas","AddPipline","SetAddPointActive","dislpayName","name","piplines","mouseDown","piplinesCount","defaultId","defaultPoint","AddPointActive","downOnSelected","points","selectedNumber","activePipline","Number","addPiplines","pipline","id","color","push","console","log","renderPiplineItems","map","item","setPipline","document","getElementById","getRandomColor","letters","i","Math","floor","random","DeletePipline","every","canvas","classList","toggle","AddPoint","x","y","point","TrySelectPoint","length","DrawPipeline","event","offsetX","offsetY","ctx","getContext","clearRect","width","height","DrawLines","DrawPoint","beginPath","arc","getRadians","fillStyle","moveTo","fill","lineTo","stroke","degrees","PI"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { render } from 'react-dom'\r\n//import { CanvasBoard } from './CanvasBoard'\r\n//mport { PiplineSegment } from './PiplineSegment'\r\nimport './css/Pipline.css'\r\nimport { PiplineSegment } from './PiplineSegment';\r\n\r\nexport class Pipline extends Component {\r\n    static dislpayName = Pipline.name;\r\n\r\n    state = {\r\n        piplinesSegmentCount: 0\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <section className=\"piplineSections\">\r\n                <div className=\"container\">\r\n                   <div className=\"row\">\r\n                        <div className=\"col-xxl-8 col-xl-8 col-lg-8\">\r\n                            <div className=\"canvasContainer\">\r\n                                <canvas id=\"piplineCanvas\" width=\"740\" height=\"425\"\r\n                                    onMouseDown={(e) => {\r\n                                        let newEvent = e.nativeEvent;\r\n                                        HandleMouseDown(newEvent)\r\n                                    }}\r\n                                    onMouseUp={e => {\r\n                                        let nativeEvent = e.nativeEvent;\r\n                                        HandleMouseUp(nativeEvent);\r\n                                    }}\r\n                                    onMouseMove={e => {\r\n                                        let nativeEvent = e.nativeEvent;\r\n                                        HandleMouseMove(nativeEvent);\r\n                                    }}                                >\r\n                                </canvas>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-xxl-4 col-xl-4 col-lg-4\">\r\n                            <div className=\"boardContainer\">\r\n                                <div className=\"canvasBoard_componen\">\r\n                                    <button className=\"btn btn-primary\" onClick={activeCanvas, AddPipline}> Добавить новый трубопровод </button>\r\n                                    <button className=\"btn btn-success\" onClick={SetAddPointActive}> Добавить узел </button>\r\n                                    <button className=\"btn btn-danger\"> Удалить узел </button>\r\n                                    <button className=\"btn btn-warning\"> Рассчитать пересечения</button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"piplineElements\" id=\"piplineItems\">\r\n                                <ul id=\"piplineList\">\r\n                                    \r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                   </div>\r\n                </div>    \r\n            </section>\r\n           \r\n        );\r\n    }\r\n\r\n\r\n    \r\n}\r\n\r\n\r\n\r\nlet piplines = []\r\nlet mouseDown = false\r\nlet piplinesCount = 0;\r\nlet defaultId = 0;\r\nlet defaultPoint = [0, 0]\r\nlet AddPointActive = false\r\nlet downOnSelected = false;\r\nlet points = []\r\nlet selectedNumber = -1;\r\nlet activePipline = new Number;\r\n\r\n\r\nfunction addPiplines(){\r\n    let pipline = {\r\n        id: piplinesCount,\r\n        name: 'Трубопровод ' + piplinesCount,  \r\n        points: [],\r\n        color: '',\r\n    }\r\n    this.piplines.push(pipline)    \r\n}\r\n \r\n\r\nfunction SetAddPointActive() {\r\n    AddPointActive = true;\r\n    console.log(\"Add active\");\r\n}\r\n\r\nlet log = () => {\r\n    console.log('kek')\r\n}\r\n\r\nfunction renderPiplineItems() {\r\n    return render(\r\n        piplines.map((item) => (\r\n            <li key={item.id} id={item.id + \"pipline\"}>\r\n                <button type=\"button\" onClick={setPipline(item.id)}>{item.name}</button>\r\n            </li>\r\n        )),\r\n        document.getElementById('piplineList')\r\n    );\r\n}\r\n\r\nfunction setPipline(id) {\r\n    console.log(\"Выранный ID \" + id)\r\n}\r\n\r\nfunction getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}\r\n\r\nfunction AddPipline() {\r\n    let color = getRandomColor()\r\n    let pipline = {\r\n        id: piplinesCount + 1,\r\n        name: \"Трубопровод \" + piplinesCount,\r\n        color: color,\r\n        points: []\r\n    }\r\n    piplines.push(pipline)\r\n    piplinesCount += 1\r\n    renderPiplineItems()\r\n    console.log(piplines)\r\n    console.log(piplinesCount)\r\n}\r\n\r\n\r\n//Проверить перед деплоем\r\nfunction DeletePipline(id) {\r\n    piplines.every((item, i) => {\r\n        if (item.i === id) {\r\n            delete piplines[i]\r\n         \r\n        }\r\n    })\r\n}\r\n\r\nlet activeCanvas = () => {\r\n    let canvas = document.getElementById('piplineCanvas').classList.toggle('canvas_active')\r\n}\r\nfunction AddPoint(x, y) {\r\n    var point = { x, y };\r\n    points.push(point);\r\n}\r\n\r\nfunction TrySelectPoint(x, y) {\r\n    for (var i = 0; i < points.length; i++) {\r\n        var point = points[i];\r\n        if (x >= point.x - 5 && x <= point.x + 5 && y >= point.y - 5 && y <= point.y + 5) {\r\n            selectedNumber = i;\r\n            DrawPipeline();\r\n            return true;\r\n        }\r\n    }\r\n    console.log(points)\r\n    return false;\r\n}\r\nfunction HandleMouseDown(event) {\r\n    mouseDown = true;\r\n    if (AddPointActive) {\r\n        var x = event.offsetX;\r\n        var y = event.offsetY;\r\n        AddPoint(x, y);\r\n        DrawPipeline();\r\n        AddPointActive = false;\r\n    }\r\n    else {\r\n        x = event.offsetX;\r\n        y = event.offsetY;\r\n        downOnSelected = TrySelectPoint(x, y);\r\n    }\r\n\r\n}\r\nfunction HandleMouseMove(event) {\r\n    if (mouseDown) {\r\n        if (downOnSelected) {\r\n            var x = event.offsetX;\r\n            var y = event.offsetY;\r\n            var point = points[selectedNumber];\r\n            point.x = x;\r\n            point.y = y;\r\n            DrawPipeline();\r\n        }\r\n    }\r\n}\r\n\r\nfunction HandleMouseUp() {\r\n    mouseDown = false;\r\n    downOnSelected = false;\r\n}\r\nfunction DrawPipeline() {\r\n    var canvas = document.getElementById('piplineCanvas');\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    if (points.length > 0) {\r\n        DrawLines();\r\n    }\r\n    for (var i = 0; i < points.length; i++) {\r\n        if (i === selectedNumber)\r\n            DrawPoint(points[i].x, points[i].y, \"red\");\r\n        else\r\n            DrawPoint(points[i].x, points[i].y, \"black\");\r\n    }\r\n\r\n}\r\n\r\nfunction DrawPoint(x, y, color) {\r\n    var canvas = document.getElementById('piplineCanvas');\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, 5, 0, getRadians(360));\r\n    ctx.fillStyle = color;\r\n    ctx.moveTo(x, y);\r\n    ctx.fill();\r\n}\r\n\r\nfunction DrawLines() {\r\n    var canvas = document.getElementById('piplineCanvas');\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.beginPath();\r\n    ctx.moveTo(points[0].x, points[0].y);\r\n    for (var i = 1; i < points.length; i++) {\r\n        ctx.lineTo(points[i].x, points[i].y);\r\n    }\r\n    ctx.stroke();\r\n}\r\n\r\nfunction getRadians(degrees) {\r\n    return (Math.PI / 180) * degrees;\r\n}"]},"metadata":{},"sourceType":"module"}